---
description: 文档编写规范
globs:
  - '**/*.md'
  - '**/README.md'
  - 'docs/**/*.md'
alwaysApply: false
tags:
  - documentation
  - markdown
version: 1.0.0
author: ai-coding-rules-team
---

# 文档编写规范

## 文档分类与位置

### 文档类型

| 文档类型 | 位置 | 说明 |
|---------|------|------|
| **设计文档** | `docs/` | 架构设计、模块设计、技术规划 |
| **开发文档** | `docs/development/` | 实施状态、进度总结、开发记录 |
| **测试文档** | `tests/README.md` | 测试指南、测试统计、E2E测试 |
| **项目主文档** | `README.md` | 项目概览、快速开始、文档导航 |
| **文档中心** | `docs/README.md` | 文档导航、文档结构说明 |

### 文档位置原则

- ✅ **按功能分类**：设计文档在 `docs/`，开发文档在 `docs/development/`
- ✅ **避免根目录散乱**：除 `README.md` 外，其他文档应归类到相应目录
- ✅ **测试文档集中**：所有测试相关文档整合到 `tests/README.md`
- ❌ **避免重复文档**：相同内容只保留一份，其他引用链接

## 文档命名规范

### 命名规则

- **设计文档**：使用编号前缀 + 描述性名称
  - ✅ `01-总体架构设计.md`
  - ✅ `02-模块设计.md`
  - ❌ `总体架构设计.md`（缺少编号）

- **开发文档**：使用描述性名称
  - ✅ `IMPLEMENTATION_STATUS.md`
  - ✅ `PROGRESS_SUMMARY.md`

- **README 文件**：目录说明文档
  - ✅ `README.md`（根目录）
  - ✅ `docs/README.md`（文档中心）
  - ✅ `tests/README.md`（测试文档）

### 命名约定

- 使用中文或英文，保持一致性
- 使用连字符 `-` 分隔单词
- 设计文档使用编号前缀（`01-`, `02-`）保持顺序
- 避免使用空格和特殊字符

## 文档结构规范

### 标准文档结构

```markdown
# 文档标题

> **最后更新**: YYYY-MM-DD
> **状态**: 进行中/已完成/已归档

## 📋 概述

简要说明文档目的和适用范围。

## 📚 目录（可选，长文档需要）

- [章节1](#章节1)
- [章节2](#章节2)

## 主要内容

### 章节1

内容...

### 章节2

内容...

---

## 📚 相关文档

- [相关文档1](path/to/doc1.md)
- [相关文档2](path/to/doc2.md)

---

**最后更新**: YYYY-MM-DD
```

### 必需元素

- ✅ **标题**：清晰描述文档内容
- ✅ **元信息**：最后更新日期、状态（如适用）
- ✅ **概述**：简要说明文档目的
- ✅ **相关文档**：链接到相关文档

### 可选元素

- 📋 **目录**：长文档（> 200 行）建议添加
- 📊 **表格**：使用表格展示结构化信息
- 💡 **提示框**：使用引用块标注重要信息
- ⚠️ **警告**：使用引用块标注注意事项

## 设计文档 vs 实现文档

### 设计文档规范

**位置**: `docs/` 目录

**特点**:

- 描述设计目标和架构
- 使用模块化命名（如 `module::submodule`）
- 标注状态（待实现/设计中/已实现）
- 代码示例标注为"设计示例"

```markdown
## ✅ 正确（设计文档）

- 设计组件: `module::component` (待实现)
- 设计组件: `module::feature` (Phase 1)

## ❌ 错误（不应出现）

- 代码: `src/module/component.rs`  ← 文件尚不存在
- 实现: `src/module/feature.rs`     ← 误导性信息
```

### 实现文档规范

**位置**: `docs/development/` 或代码注释

**特点**:

- 记录已实现的功能
- 使用实际文件路径（如 `src/module/component.rs`）
- 包含代码示例和测试结果
- 标注完成状态和测试覆盖

## 链接引用规范

### 链接格式

- ✅ **相对路径**：`[文档名](path/to/doc.md)`
- ✅ **锚点链接**：`[章节](#章节名)`
- ❌ **绝对路径**：避免使用 `/Users/...` 等绝对路径
- ✅ **外部链接**：GitHub 链接等应使用完整 URL

### 链接更新原则

- **移动文档时**：更新所有引用该文档的链接
- **重命名文档时**：更新所有引用链接
- **删除文档时**：检查并更新所有引用

### 链接检查

创建或修改文档后，检查：

1. ✅ 所有相对路径链接是否正确
2. ✅ 所有文档引用是否存在
3. ✅ 链接文本是否清晰描述目标

## 文档内容规范

### 内容组织

- **层次清晰**：使用合适的标题层级（H1-H4）
- **逻辑顺序**：按重要性或时间顺序组织内容
- **避免重复**：相同内容只在一处详细说明，其他地方引用

### 内容更新

- **及时更新**：功能实现后及时更新相关文档
- **保持同步**：文档内容应与代码实现保持一致
- **标注状态**：明确标注文档状态（设计/实现/已废弃）
- **日期更新**：每次编写或修订文档时，如果文档中的编写/修订日期字段发生更改，必须使用当前的日期（东八区，格式：YYYY-MM-DD）

### 内容质量

- ✅ **清晰准确**：使用准确的技术术语
- ✅ **完整详细**：提供足够的上下文和示例
- ✅ **易于理解**：使用图表、表格等辅助说明
- ❌ **避免过时信息**：及时删除或更新过时内容

### 图示和图表规范

- ✅ **优先使用 Mermaid**：Markdown 文档中的图示，如果有可能，应尽量使用 Mermaid 表达
- ✅ **Mermaid 类型**：流程图、序列图、类图、状态图、ER 图等
- ✅ **代码块格式**：使用 ` ```mermaid ` 代码块包裹 Mermaid 代码
- ❌ **避免外部图片**：除非 Mermaid 无法表达（如复杂的手绘图表），否则避免使用外部图片文件
- ✅ **可维护性**：Mermaid 图表与文档一起版本控制，便于维护和更新

**示例**：

````markdown
## 架构图

```mermaid
graph TD
    A[客户端] --> B[服务层]
    B --> C[数据层]
```
````

## 文档整合原则

### 何时整合

- **内容重复**：多个文档包含相同内容时整合
- **主题相关**：同一主题的文档应集中管理
- **位置混乱**：文档位置不符合分类原则时整理

### 整合步骤

1. **识别重复**：找出重复或相关的内容
2. **选择主文档**：确定保留的主要文档
3. **整合内容**：将内容整合到主文档
4. **更新链接**：更新所有引用链接
5. **删除冗余**：删除已整合的冗余文档

### 整合示例

```markdown
# 整合前
- tests/README.md（基础测试文档）
- tests/E2E_PREPARATION.md（E2E 准备）
- tests/E2E_TEST_SUMMARY.md（E2E 总结）

# 整合后
- tests/README.md（完整测试文档，包含所有测试相关内容）
```

## 文档维护流程

### 创建新文档

1. **确定位置**：根据文档类型选择正确位置
2. **命名规范**：遵循命名规范
3. **添加元信息**：添加最后更新日期、状态等
4. **更新导航**：在相关 README 中添加链接
5. **检查链接**：确保所有链接正确

### 更新现有文档

1. **更新内容**：修改文档内容
2. **更新日期**：更新"最后更新"日期（必须使用当前日期，东八区，格式：YYYY-MM-DD）
3. **检查链接**：确保内部和外部链接正确
4. **同步相关文档**：更新相关文档的引用

### 删除文档

1. **检查引用**：搜索所有引用该文档的地方
2. **更新链接**：更新或删除相关链接
3. **移动内容**：如有重要内容，先整合到其他文档
4. **删除文件**：确认无引用后删除

## 文档模板

### 设计文档模板

```markdown
# [模块名]设计

> **最后更新**: YYYY-MM-DD
> **状态**: 设计中/待实现/已实现
> **阶段**: Phase X

## 📋 概述

[简要说明设计目标和范围]

## 🎯 设计目标

[设计目标和需求]

## 🏗️ 架构设计

[架构图和说明]

## 📝 实现细节

[详细设计说明]

## 📚 相关文档

- [相关文档1](path/to/doc1.md)
```

### 开发文档模板

```markdown
# [功能名]实施状态

> **最后更新**: YYYY-MM-DD
> **状态**: 进行中/已完成

## 📋 概述

[简要说明实施情况]

## ✅ 已完成

[已完成的功能列表]

## ⏳ 进行中

[正在实施的功能]

## 📚 相关文档

- [开发计划](path/to/plan.md)
```

## 开发流程

### 文档编写步骤

1. **确定文档类型**：设计文档/开发文档/测试文档
2. **选择正确位置**：根据文档类型选择目录
3. **遵循命名规范**：使用规范的文档名称
4. **使用标准结构**：遵循文档结构规范
5. **添加元信息**：添加更新日期、状态等
6. **更新导航文档**：在相关 README 中添加链接
7. **检查链接**：确保所有链接正确

### 文档维护原则

- **及时更新**：功能变更后及时更新文档
- **保持同步**：文档内容与代码实现保持一致
- **避免重复**：相同内容只保留一份
- **定期整理**：定期检查并整理文档结构

---

## ⚠️ 注意事项

1. **设计文档标注**：设计文档必须明确标注"设计阶段"，避免与实现混淆
2. **链接一致性**：移动或重命名文档时，必须更新所有引用链接
3. **避免根目录散乱**：除 `README.md` 外，其他文档应归类到相应目录
4. **文档整合**：定期检查并整合重复或相关的文档内容
5. **日期字段更新**：每次编写或修订文档时，如果文档中的编写/修订日期字段发生更改，必须使用当前日期（东八区，格式：YYYY-MM-DD），不得使用固定日期或占位符



